commonConfig:
  databaseUrl: "postgresql://$(DATABASE_ENDPOINT)/kmsconnector"
  gatewayUrl: "http://gateway-node:8547"
  chainId: "10901"
  gatewayContractAddresses:
    decryption: "0x5D8BD78e2ea6bbE41f26dFe9fdaEAa349e077478"
    gatewayConfig: "0x94153006067B89399e059284f5a7Fe016940E332"
    kmsGeneration: "0x5779Ac320BbDB267Cc4d1b77195a203F926bBC60"
  env:
    - name: DATABASE_ENDPOINT
      valueFrom:
        secretKeyRef:
          name: connector-database
          key: endpoint
    - name: PGUSER
      valueFrom:
        secretKeyRef:
          name: connector-database
          key: username
    - name: PGPASSWORD
      valueFrom:
        secretKeyRef:
          name: connector-database
          key: password
    - name: KMS_CONNECTOR_DECRYPTION_POLLING_MS
      value: "500"
    - name: KMS_CONNECTOR_GAS_MULTIPLIER_PERCENT
      value: "300"

kmsConnectorDbMigration:
  enabled: true
  image:
    name: hub.zama.org/zama-protocol/zama-ai/fhevm/kms-connector/db-migration
    tag: v0.9.3
  env: []
  affinity:
    nodeAffinity:
      requiredDuringSchedulingIgnoredDuringExecution:
        nodeSelectorTerms:
          - matchExpressions:
              - key: "node.kubernetes.io/enclave-enabled"
                operator: In
                values:
                  - "true"
  tolerations:
    - key: "node.kubernetes.io/enclave-enabled"
      effect: NoSchedule
      operator: Equal
      value: "true"

kmsConnectorGwListener:
  enabled: true
  nameOverride: kms-connector-gw-listener
  image:
    name: hub.zama.org/zama-protocol/zama-ai/fhevm/kms-connector/gw-listener
    tag: v0.9.3
  replicas: 1
  affinity:
    nodeAffinity:
      requiredDuringSchedulingIgnoredDuringExecution:
        nodeSelectorTerms:
          - matchExpressions:
              - key: "node.kubernetes.io/enclave-enabled"
                operator: In
                values:
                  - "true"
  tolerations:
    - key: "node.kubernetes.io/enclave-enabled"
      effect: NoSchedule
      operator: Equal
      value: "true"

kmsConnectorKmsWorker:
  enabled: true
  nameOverride: kms-connector-kms-worker
  image:
    name: hub.zama.org/zama-protocol/zama-ai/fhevm/kms-connector/kms-worker
    tag: v0.9.3
  replicas: 1
  config:
    kmsCoreEndpoints: "http://kms-core:50100"
  affinity:
    nodeAffinity:
      requiredDuringSchedulingIgnoredDuringExecution:
        nodeSelectorTerms:
          - matchExpressions:
              - key: "node.kubernetes.io/enclave-enabled"
                operator: In
                values:
                  - "true"
  tolerations:
    - key: "node.kubernetes.io/enclave-enabled"
      effect: NoSchedule
      operator: Equal
      value: "true"

kmsConnectorTxSender:
  enabled: true
  nameOverride: kms-connector-tx-sender
  image:
    name: hub.zama.org/zama-protocol/zama-ai/fhevm/kms-connector/tx-sender
    tag: v0.9.3
  replicas: 1
  wallet:
    secret:
      name: connector-wallet-keys
      key: kms_txsender.private_key
  affinity:
    nodeAffinity:
      requiredDuringSchedulingIgnoredDuringExecution:
        nodeSelectorTerms:
          - matchExpressions:
              - key: "node.kubernetes.io/enclave-enabled"
                operator: In
                values:
                  - "true"
  tolerations:
    - key: "node.kubernetes.io/enclave-enabled"
      effect: NoSchedule
      operator: Equal
      value: "true"

#tracing:
#  endpoint: "http://observability-alloy.observability.svc.cluster.local:4317"